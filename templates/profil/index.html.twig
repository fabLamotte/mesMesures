{% extends 'base2.html.twig' %}

{% block title %}Mesure | Profil{% endblock %}

{% block stylesheets %}
    <style>
        @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');
        .goal { font-size: 32px ; height:100%; max-height:150px; }
          .circular{ height: 100px; width: 100px; position: relative; }
          .circular .inner, .circular .outer, .circular .circle{ position: absolute; z-index: 6; height: 100%; width: 100%; border-radius: 100%; }
          .circular .inner{ top: 50%; left: 50%; height: 80px; width: 80px; margin: -40px 0 0 -40px; background-color: #2F3642; border-radius: 100%; }
          .circular .circle{ z-index: 1; }
          .circular .numb{ position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; font-size: 32px; font-weight: 500; color: white; }
          .circular .bar{ position: absolute; height: 100%; width: 100%; background: #22252C; -webkit-border-radius: 100%; clip: rect(0px, 100px, 100px, 50px); }
          .circle .bar .progress{ position: absolute; height: 100%; width: 100%; -webkit-border-radius: 100%; clip: rect(0px, 50px, 100px, 0px); }
          .circle .bar .progress, .dot span{ background: #FF7000; }
          .circle .left .progress{ z-index: 1; animation: left 0.2s linear both; }
          @keyframes left { 100%{ transform: rotate(180deg); } }
          .circle .right{ z-index: 3; transform: rotate(180deg); }
          .circle .right .progress{ animation: right 0.2s linear both; animation-delay: 0.2s; }
          @keyframes right { 100%{ transform: rotate(180deg); } }
          .graph { overflow:scroll; height:100%; }
    </style>
{% endblock %}

{% block body %}
    <section class="m-0 p-0 bloc goal rounded col-12 d-flex justify-content-around align-items-center custom-color">
      <div class="d-flex flex-column align-items-center">
        <div class="text-white" >Objectif poids</div>
        {% if user.weightGoal is null %}
            <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">
              Fixer un objectif de poids
            </button>

            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Fixez-vous un nouvel objectif de poids</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    ...
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>
        {% else %}
          <div class="circular">
            <div class="inner"></div>
            <div class="outer"></div>
            <div class="numb">0%</div>
            <div class="circle">
              <div class="bar left"><div class="progress"></div></div>
              <div class="bar right"><div class="progress"></div></div>
            </div>
          </div>
        {% endif %}
      </div>
      <div class="d-flex flex-column align-items-center text-center">
        <div class="text-white">Mesures restantes</div>
        <div>8/10</div>
      </div>
      <div class="d-flex flex-column align-items-center">
        <div class="text-white">IMC</div>
        <div>Surpoids</div>
      </div>
    </section>
    <section class="m-0 p-0 bloc graph rounded col-12">
      <p>qsd</p>
    </section>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('js/jquery.js') }}" type="text/javascript"></script>
    <script>
      function launch_weight_goal(){
        const numb = document.querySelector(".numb");
        let counter = 0;
        let max = 100;
        setInterval(()=>{
          if(counter == max){
            clearInterval();
          }else{
            counter+=1;
            numb.textContent = counter + "%";
          }
        }, 10);
      }
    </script>
{% endblock %}